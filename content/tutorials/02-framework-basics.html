---
title: Framework Basics
description: A description
created: !!timestamp '2011-10-20 00:00:00'
tags:
    - beginner
    - tutorial
---

# Framework Basics

## PlayCanvas Application Framework

The PlayCanvas runtime is split roughly into two sections. The main engine contains low-level graphics, audio, input functionality, plus any additional useful utilities, like resource loading, string and path handling, etc. The Application Framework (under the namespace pc.fw) contains the higher level functions for creating game Entities; managing the game startup and shutdown and interacting with the PlayCanvas tools suite.

This tutorial will walk you through:

* Creating a Framework Application
* Adding a Camera Entity
* Adding a Model Entity
* Adding a Light Entity

##1. Creating an HTML file

First we need an index.html file which is page where you application is going to live

~~~html~~~
<!doctype html>
<html>
	<head>
        <script type="text/javascript" src="/getting-started/playcanvas-x.x.x.js">
	</head>
	<body>
		<canvas id="sample_canvas" width="800" height="600"></canvas>
		<script type="text/javascript">
			// Start running the Framework Application
			pc.script.start();
		</script>
	</body>
</html>
~~~~~~~

## 2. Create the application

Now we need a script file to create the application and game logic. Alongside your index.html file create a file called main.js. To start with, add this code to main.js

~~~javascript~~~
var application;
pc.script.main(function main () {
    // Get the canvas element from the document
    var canvas = document.getElementById("sample_canvas");
 
    // Create new Application
    application = new pc.fw.Application(canvas, {});
 
    var context = application.context;
 
    // Start Application update loop
    application.start();
});
~~~~~~

Then include the javascript file into your main page by adding this line to your index.html,
inside the <head> tag, but after the line including the PlayCanvas runtime.

~~~html~~~
<script type="text/javascript" src="main.js"></script>
~~~~~~~~~~

### What it does

pc.script.main() takes a function as it's argument, this function is the called by pc.script.start(). This is where you initialise your Application and start it running.

In the main() function the first line gets the &lt;canvas> element. The &lt;canvas> element is where we do all our rendering, you can position it and style it just like any other HTML element, 
this is one of features that makes WebGL so powerful.
	
On the next line we create the Framework Application. The application needs the canvas element so it knows where to render to, 
it can also take some optional parameters as a second argument, but for now we don't need any of those.

Next we save the ApplicationContext object as we'll be passing that into some functions later. 
And finally, on the last line we call application.start() which starts the update loop in the application.

If you load your page now, you won't see anything, that's because there is no camera, and without a camera there is nothing to draw.

## 3. Create a Camera Entity

To create a Camera Entity add this function to you main.js file after all the other code. And then just before application.start() call the function to create a Camera Entity passing in the context object we store previously.

~~~javascript~~~

function createCamera(context) {
    var entity = context.manager.create(pc.fw.Entity);
    context.components.camera.createComponent(entity, {
       fov: 45,
        activate: true,
        nearClip: 0.1,
        farClip: 1000
    });
 
    var transform = pc.math.mat4.makeTranslate(0,0.1,0.75);
    entity.setLocalTransform(transform);
 
    context.root.addChild(entity);
}
~~~~~~~~

Reload your page and the canvas element now should be a plain grey rectangle. That’s good, it means your camera is rendering, but all there is to render is the backdrop.

### What it does

The first line of this function creates a new Entity. Entities are the main primitive of the PlayCanvas framework, every game object you create will be an Entity. On their own, all an Entity does is create an object with a transform matrix, so it knows it’s location and orientation; and parent and children relationships, so it knows what it’s relationship is to other Entities.

The second line creates a Camera component attached the the Entity we’ve just created. The other important feature of Entities is that you can attach Components to them. Components are a way of attaching data and logic to an Entity. The PlayCanvas runtime comes with most of the Components you will need to create a rich game experience, but you can also write your own. In this case, we are creating a Camera component and providing the data needed to make a new camera. That is, field of view (fov), near clipping distance, far clipping distance, and telling it to activate immediately.

Then we’re setting the local transform of the camera, Camera’s look down their negative z-axis, so in this case we move it up and along the z, and it looks back at the origin.

The final line adds the new Entity to the root node, only Entities attached under the root will be updated by the engine.

## 4. Create a Model Entity

Very nice, but not a very exciting application so far. How about we draw something more interesting. Add the following function under the camera code and call it just after you called createCamera().

For this code to work you’re going to need a model to load. Take this Teapot model and save it as teapot.json alongside index.html and main.js.

~~~javascript~~~

function createModel(context) {
    var entity = context.manager.create(pc.fw.Entity);
    var data = {
        file: {
            url: "/static/tutorials/teapot.json"
        }
    };
    var asset = context.loaders.asset.open(data);
    context.components.model.createComponent(entity);
    context.components.model.set(entity, "asset", [asset.getGuid()]);
 
    context.root.addChild(entity);
}
~~~~~~~

### What it does

Just like creating the Camera Entity, now we’re creating another new Entity and this time attaching a Model Component to it.

In order to load a model, we define some asset data, which specifies the URL of the model file we want to load. We use the asset loader from the ApplicationContext to create an Asset object. Then instead of passing the data into createComponent() we’re using the set() accessor to set the ‘asset’ value on the Component. The set() and get() accessor are common to all Components are only way to update the Component’s data aside from specialized functions for individual Components.

If you reload the page, you should find your model is displayed in the centre of the canvas, but it’s still not right, it’s all dark

## 5. Create a Light Entity

In the last part of the tutorial we’ll create one more Entity, a Light. So add the following function to your code and call it just after you called createModel().

~~~javascript~~~

function createLight(context) {
    var entity = context.manager.create(pc.fw.Entity);
    context.components.light.createComponent(entity);
 
    var transform = pc.math.mat4.makeTranslate(5,2,0);
    entity.setLocalTransform(transform);
 
    context.root.addChild(entity);
}
~~~~~~~

### What it does

This should be pretty familiar by now. All we’re doing is creating another new Entity, this time we attach a Light Component, and by default the Light Component doesn’t need any data. We moving the light off to the left-hand side and then adding it to the root Node.

If you reload your page now, you should see the same thing as in the canvas below. Congratulations you’ve made you first PlayCanvas Application.

### Exercise for the reader

The pc.fw.Entity class has methods for updating the transformation matrix of the Entity. Use the following function and methods to make the teapot and the camera spin around and move left and right.

~~~javascript~~~
    pc.fw.Entity.getLocalTransform()
    pc.fw.Entity.setLocalTransform()
    pc.math.mat4.makeRotate()
    pc.math.mat4.makeTranslate()
~~~~~~
